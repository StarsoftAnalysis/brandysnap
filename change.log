Changelog for brandysnap
========================

0.2.1	5/10/12
* Bug fixes:
  - use exclude/include options /after/ context override.
  - don't try to check for writable destination with --dry-run.
  - allow for blank period in 'old' cSpec.
  - set rsync's timeout=60 option to avoid hanging when connection is lost
    and trap time-outs appropriately.
  - don't give message about 'no-delete' if interrupted.
  - when --no-snapshot specified, don't show current one in status or
    metadata.
  - fix logic in processDestinations re --no-snapshot and tidy output.
  - skip partial backups when considering min-interval.
* Allow abbreviated options in configuration file.
* Print configuration file name at top of output.
* Better control of debugging output.
* Prettier line spacing in output.
* Prettier formatting of snapshot sizes.
* --restart now implies --min-interval=0
* Changed deletion logic so that incomplete snapshots are kept unless
  there are enough complete ones for the period.

0.2.0	20/9/12
* added sections (aka contexts) to configuration
  allowing more targeted use of 'exclude' etc.
  - many related changes to option validation
* checked date handling for daylight saving and leap years.

0.1.20	01/6/12
* add 'min-interval' option

0.1.19	14/4/12
* better/simpler interrupt handling
* add summary of successes and failures
* bugfix: recalculate size of restarted snapshots

0.1.18	6/2/12
* replace '-x' suffix on partial snapshots with metadata in a status file
  - that makes a lot of things easier, but we now rely on the metadata file
    to know which backups are partial.
* simplified the status listing
* correctly deal with multiple remote sources
* always add a host-name subdirectory, even for local sources (because it's
  more consistent, and doesn't lead to problems if a jobs is changed
  from push to pull.
* corrections to systemCall to prevent segfault with Perl 5.14.2
* code tidying, including the test cases

0.1.17	30/1/12
* fix bug in clearSuffix(), so --restart works again
* use GetOpt::Long (and some extra code) instead of Config::General for reading 
  the configuration file

0.1.16	16/1/12
* fix error handling when no remote sources are readable
* fix handling of interrupts and --allow-restart option
* Improved error checking in deleteOrRenameSnapshot(); and interaction with --allow-restart option.
* Restructured: %S now global, with more information in it
  - lots of changes as a result
 
0.1.15	6/11/11
* fixed bug when jumping back one hour at same time as daylight savings ends

0.1.14	5/11/11
* allow range (minimum - maximum) on number of snapshots in a period, aka the 'frequency'
* fixes to option checking
* fixes for remote destinations
* fixes re handling incomplete snapshots
 
0.1.13	24/10/11 
* adjustments to signal handling 
* multiple link-dests via --ldcount option 
* rename incomplete backups, with new options --all-failed, --some-failed,
  and associated changes to getDeleteList, getMatchingSnapshots etc.

0.1.12 
* added 'allow-restart' option 
* better exit code handling 
* simplified return code checking in runRsync 
* fix bugs in getExpirableSnapshots 
* other debugging 
 
0.1.11 
* add signal handling 
 
0.1.10 
* treat rsync error 24 as minor (files vanished) 

0.1.9 
* corrections re getDeleteList if rsync failed 
* add 'restart' option 

0.1.8	9/8/11
* oops! There are 12 months in a year, not 52. 
  (Only affected specs that auto-padded months to fill a year)

0.1.7	25/01/11
* new version of snapshotInfoRemote -- hopefully it's quick enough now.

0.1.6
* restructured run() so that compileSpecs only has to be run once,
  and the case where a new snapshot would be immediately deleted can be avoided.
* improvements to fmtRange

0.1.4   04/07/11  Minor bug fixes

0.1.3   01/07/11
 * no snapshot info for remote destination -- too slow (for now).
 * better validation of bandwith limit options.
 * rsync-options -- don't include the essential ones (--relative)
   in the option, and put the user's ones first.
 * strip unnecessary quotes and spaces from string options.
 * improvements to spec alignment -- use partial periods
   if they have enough snapshots.
 * re-write compileSpecs to make it prettier and right
   with corresponding changes to findGoodPeriods etc.

0.1.1	19/06/11  Minor bug fixes

0.1.0	18/06/11  First public release
